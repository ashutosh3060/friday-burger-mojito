# -*- coding: utf-8 -*-
"""eda-model-build.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1FIav10dc8Sfs2pp_G9VCSHHcmou2gDUC
"""
#Libraries
import time
from datetime import date
import pickle
import numpy as np
import pandas as pd
from xgboost import XGBClassifier

## Define the path, filename
#order_label_path = "/content/"
#order_label_file = "customer_order_label.csv"
## import the dataset as a dataframe
#df_order_label = pd.read_csv(order_label_path+order_label_file)

today = date.today() # today's date

# Feature set and target variable
feature_set = ['first_order_before', 'last_order_before', 'cntns_order_period', 'comm_orderhour', 'num_success_order', 'num_fail_order', 'is_voucher', 'avg_voucher_amnt', 'is_deliveryfee', 'avg_deliveryfee', 'is_amount', 'avg_amount', 'num_restaurant', 'num_city',
       'num_paymentid', 'num_platform', 'num_transmission', 'order_afternoon',
       'order_early_morning', 'order_evening', 'order_late_night',
       'order_morning', 'order_night', 'payment_id_1491', 'payment_id_1523', 'payment_id_1619',
       'payment_id_1779', 'payment_id_1811', 'platform_id_525',
       'platform_id_22167', 'platform_id_22263', 'platform_id_22295',
       'platform_id_29463', 'platform_id_29495', 'platform_id_29751',
       'platform_id_29815', 'platform_id_30135', 'platform_id_30199',
       'platform_id_30231', 'platform_id_30359', 'platform_id_30391',
       'platform_id_30423', 'transmission_id_212', 'transmission_id_1988',
       'transmission_id_4196', 'transmission_id_4228', 'transmission_id_4260',
       'transmission_id_4324', 'transmission_id_4356', 'transmission_id_4996',
       'transmission_id_21124']
target = 'is_returning_customer'
# X and y for independent and dependent variable datasets
X = df_order_label[feature_set]
y = df_order_label[target]

# Model Training
xgb = XGBClassifier() # XGBoost Classifier
xgb.fit(X, y)

# save the model as a pickle file
filename = 'xgboost'+str(today)
pickle.dump(xgb, open(filename, 'wb'))